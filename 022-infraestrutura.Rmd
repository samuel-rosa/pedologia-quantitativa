<!-- # PARTE II -- INFRAESTRUTURA TECNOL√ìGICA {-} -->

<!-- # Hardware -->

<!-- # Programas de Computador -->

# Gest√£o de Dados e C√≥digo Fonte

**Aten√ß√£o!** Este cap√≠tulo est√° em fase de *desenvolvimento*. Visite a [p√°gina do projeto][issues] se tiver 
alguma sugest√£o, d√∫vida ou estiver disposto a colaborar. Sua opini√£o/ajuda √© muito importante!

## Introdu√ß√£o

Um importante passo consiste na cria√ß√£o do nosso diret√≥rio de trabalho. Para isso, acesse seu gerenciador
de diret√≥rios e crie a seguinte estrutura de diret√≥rios em seu local favorito de trabalho:

    projeto
    |- code/       # qualquer c√≥digo de programa√ß√£o
    |  |- R/       # c√≥digo de programa√ß√£o em R
    |
    |- data
    |  |- grid/    # dados matriciais
    |  |- R/       # dados no formato *.rda
    |  |- vector/  # dados vetoriais
    |
    |- doc/        # arquivos usados para redigir o relat√≥rio
    |  |- fig/     # figuras usadas no relat√≥rio

Note que, dentro do nosso diret√≥rio de trabalho principal (`projeto`) existem tr√™s subdiret√≥rios:
`code`, `data` e `doc`. O primeiro deles, `code`, serve para armazernamos os arquivos
contendo c√≥digo de programa√ß√£o em qualquer linguagem. Para cada linguagem criamos um subsubdiret√≥rio 
espec√≠fico. Nesse exemplo, como usaremos apenas o R, criaremos apenas um subsubdiret√≥rio chamado R. Ali 
dentro ser√£o armazenados os *scripts* com c√≥digo de programa√ß√£o do escritos em R.

O segundo subdiret√≥rio ser√° utilizado para armazenarmos os dados usados no projeto. Nesse exemplo, s√£o 
tr√™s os tipos de dados que utilizaremos, cada um armazenado em um subsubdiret√≥rio espec√≠fico. No 
subsubdiret√≥rio `grid` ficar√£o armazenados os dados matriciais, ou seja, os dados das covari√°veis e 
os resultados das predi√ß√µes espaciais. J√° no subsubdiret√≥rio `vector` ficar√£o armazenados os dados 
vetoriais, ou seja, aqueles cuja forma de representa√ß√£o espacial pode ser a de pontos, linhas e pol√≠gonos. 
Isso inclui os dados de solo e dos limites da √°rea de estudo. Por fim, o subsubdiret√≥rio R ser√°
usado para armazenar dados diversos produzidos durante o processamento no R, os quais ser√£o salvos 
usando o formato `rda`.

O terceito e √∫ltimo subdiret√≥rio de nosso diret√≥rio de trabalho `projeto`, aqui denominado `doc`,
ser√° usado para armazenar os arquivos usados para redigir os documentos resultantes do projeto.

No RStudio, acesse

    Arquivo > Novo projeto > Diret√≥rio existente

e navegue at√© o diret√≥rio rec√©m criado `projeto`. Clique em `Criar projeto`. Toda a 
estrutura de diret√≥rios criada recentemente aparecer√° no painel direito inferior do RStudio. Agora crie um
novo arquivo do R e salve-o no diret√≥rio `bigdata > code > R`. Ser√° nesse arquivo que voc√™ organizar√° o 
c√≥digo em R usado para o processamento dos dados. A cria√ß√£o de um projeto no RStudio 
facilita a organiza√ß√£o dos dados.
Sempre que uma rotina de an√°lises for desenvolvida no R √© preciso definir o diret√≥rio de trabalho. O diret√≥rio 
de trabalho constitui a pasta em que est√£o localizados os arquivos contendo os dados a serem analisados. Al√©m 
disso, √© no diret√≥rio de trabalho que o R salva o hist√≥rico de trabalho contendo todas as opera√ß√µes realizadas.

Inicie o QGIS e acesse

    Projeto > Novo > Salvar como

e navegue at√© o diret√≥rio `projeto`. Nomeie o projeto como `projeto`. Assim como para o
RStudio, a cria√ß√£o de um projeto no QGIS facilita a organiza√ß√£o dos dados.

## Bases de Dados do Solo

### Perfis do Solo

* CENA-USP: Digital soil properties database of the Amazon part from the RADAMBRASIL project
    + ftp://fapespclima.ccst.inpe.br/lba/ornlworking/carbon_dynamics/CD/CD-208/CD208_RADAMBRASIL_Soils/
* Esalq-USP: A national soil profile database for Brazil available to international scientists
    + http://www.esalq.usp.br/gerd/
* EMBRAPA: Sistema de Informa√ß√£o de Solos Brasileiros
    + https://www.bdsolos.cnptia.embrapa.br/consulta_publica.html
* ISRIC: World Soil Information Service (WoSIS)
    + http://www.isric.org/data/wosis
* NASA: Large-Scale Biosphere-Atmosphere Experiment in Amazonia
    + https://daac.ornl.gov/LBA/lba.shtml

### Mapas do Solo 

* EMBRAPA: GeoPortal Digital
  + http://mapoteca.cnps.embrapa.br/
* ISRIC: SoilGrids
  + https://soilgrids.org/

## Gerenciamento de C√≥digo Fonte

### git

Sistema git de gerenciamento de c√≥digo fonte e controle de vers√£o distribu√≠do

O instalador do git para o seu OS est√° dispon√≠vel no endere√ßo abaixo:

* https://git-scm.com/downloads

### GitHub

O [GitHub][github] √© uma das plataformas mais populares para hospedagem de c√≥digo fonte, sobretudo entre os usu√°rios e desenvolvedores de pacotes para o R.

[github]: https://github.com/

Acesse a p√°gina do GitHub no endere√ßo abaixo para criar sua conta:

* https://github.com/

## Documenta√ß√£o e Publica√ß√£o

### Programa√ß√£o letrada

Linguagem de marca√ß√£o [Markdown do R](http://rmarkdown.rstudio.com/)

[Cadernos de anota√ß√µes](http://rmarkdown.rstudio.com/r_notebooks.html). 

### Plataformas de publica√ß√£o

O [Hugo][hugo], um programa de computador gratu√≠to e de c√≥digo aberto, √© um dos geradores de p√°ginas est√°ticas da Internet mais populares. Um gerador de p√°ginas est√°ticas consiste num programa que recebe arquivos de texto plano (Markdown) como entrada e os processa de maneira a produzir arquivos no formato HTML. Esses arquivos no formato HTML finalmente v√£o compor o conte√∫do essencial da p√°gina da Internet. Qualquer pessoa que acessar uma p√°gina est√°tica receber√°, em seu computador, exatamente o mesmo conte√∫do. Isso √© completamente diferente das p√°ginas com conte√∫do din√¢mico (Figure \@ref(fig:ufsm-page)), as quais podem enviar conte√∫dos diferentes para as pessoas que a estiverem acessando dependendo de condi√ß√µes espec√≠ficas. Por exemplo, uma p√°gina que exige o cadastro do visitante enviar√° conte√∫do relacionado √†quele visitante. Para que isso ocorra, as p√°ginas din√¢micas dependem de uma base de dados e uma linguagem como PHP no servidor para realizar algum processamento antes de enviar o conte√∫do da p√°gina ao seu visitante. Numa p√°gina est√°tica, o conte√∫do n√£o fica armazenado em uma base de dados, e sim em arquivos HTML prontos para servir armazenados num servidor qualquer. Assim, as p√°ginas est√°ticas costumam ser mais r√°pidas em responder √†s a√ß√µes dos visitantes. Elas tamb√©m s√£o mais f√°ceis de implementar e manter, uma vez que n√£o dependem de servidores especializados ou a instala√ß√£o de programas espec√≠ficos para gerenciamento de conte√∫do.

[hugo]: https://gohugo.io/

```{r ufsm-page, echo=FALSE, fig.cap="P√°gina din√¢mica da Universidade Federal de Santa Maria.", out.width='80%', fig.align='center'}
knitr::include_url("http://site.ufsm.br/")
```

Existem in√∫meros geradores de p√°ginas est√°ticas da Internet. O Hugo se destaca entre eles por ser de f√°cil instala√ß√£o e conter nenhuma ou pouqu√≠ssimas depend√™ncias (dependendo do sistema operacional). O Hugo tamb√©m √© bastante r√°pido na gera√ß√£o das p√°ginas e relativamente f√°cil de configurar se comparado aos demais geradores de p√°ginas est√°ticas existentes. Al√©m disso, o Hugo possui uma comunidade de usu√°rios bastante ativa, o que facilita as coisas quando precisamos resolver alguma d√∫vida. Essa atividade reflete no n√∫mero de [temas][tema-hugo] -- cole√ß√£o de arquivos de modelos e recursos opcionais (CSS e JavaScript) que definem o aspecto visual da p√°gina quando publicada -- dispon√≠veis para instala√ß√£o.

[tema-hugo]: https://themes.gohugo.io

Visite o endere√ßo abaixo para ver as instru√ß√µes sobre como instalar a √∫ltima vers√£o do Hugo:

* https://gohugo.io/getting-started/installing/

Ou, alternativamente, descarregue o instalador para o seu OS do seguinte endere√ßo:

* https://github.com/gohugoio/hugo/releases

A principal defici√™ncia do Hugo -- para usu√°rios do R -- √© a falta de suporte para a implementa√ß√£o do Markdown para o R. Isso significa que, na implementa√ß√£o nativa do Hugo, n√£o √© nada f√°cil gerar resultados (figuras, tabelas) usando c√≥digo do R. Al√©m disso, o Hugo n√£o usa o [Pandoc][pandoc] como motor de convers√£o de Markdown em HTML. Foi exatamente para sanar essas duas defici√™ncias que o engenheiro de *software* do RStudio [Yihui Xie][yihui-xie] criou o pacote do R [blogdown][blogdown].

[pandoc]: http://pandoc.org/
[blogdown]: https://bookdown.org/yihui/blogdown/
[yihui-xie]: https://yihui.name

```{r, eval=FALSE}
# Instala√ß√£o da √∫ltima vers√£o do pacote blogdown e depend√™ncias
devtools::install_github("rstudio/blogdown", dependencies = TRUE)
```

Projetos de constru√ß√£o de p√°ginas da Internet usando Hugo e blogdown podem ser facilmente gerenciados usando o RStudio. Para criar um projeto, v√° at√© `File > new Project > New Directory` e escolha `Website using blogdown` (Figura \@ref(fig:website-using-blogdown)).

```{r website-using-blogdown, echo=FALSE, fig.cap='Cria√ß√£o de novo projeto de p√°gina da Internet usando blogdown no RStudio.', out.width='50%', fig.align='center'}
knitr::include_graphics('images/website-using-blogdown.png')
```

A pr√≥xima caixa de di√°logo traz op√ß√µes para definir o nome do novo diret√≥rio e a sua localiza√ß√£o no sistema de arquivos de seu computador (Figura \@ref(fig:diretorio-tema-blogdown)). Como voc√™ j√° instalou o Hugo, desabilite a op√ß√£o `Install Hugo automatically`. Escolha o [tema do Hugo][tema-hugo] indicando o nome do respectivo reposit√≥rio no GitHub. (Recomendo usar o tema [acad√™mico][tema-academico] `gcushen/hugo-academic` üòÉ)

```{r diretorio-tema-blogdown, echo=FALSE, fig.cap='Escolha do diret√≥rio do projeto e tema da p√°gina da Internet usando blogdown no RStudio.', out.width='50%', fig.align='center'}
knitr::include_graphics('images/diretorio-tema-blogdown.png')
```

[tema-academico]: https://themes.gohugo.io/academic/
